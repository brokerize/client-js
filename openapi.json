{"components":{"examples":{},"headers":{},"parameters":{},"requestBodies":{},"responses":{},"schemas":{"BrokerName":{"type":"string","enum":["demo","consors","finanzen","justtrade","comdirect"]},"BrokerEnvironment":{"properties":{"isTestingEnvironment":{"type":"boolean"},"label":{"type":"string"},"id":{"type":"string"}},"required":["isTestingEnvironment","label","id"],"type":"object"},"BrokerLoginForm":{"properties":{"passwordField":{"properties":{"label":{"type":"string"},"type":{"type":"string","enum":["string","password"]}},"required":["label","type"],"type":"object"},"usernameField":{"properties":{"label":{"type":"string"},"type":{"type":"string","enum":["string","password"]}},"required":["label","type"],"type":"object"}},"type":"object","description":"If a login form can be shown for the broker, describes the fields to show."},"BrokerMeta":{"properties":{"supportsOAuthLogin":{"type":"boolean","description":"If true, the user can login at the broker via OAuth (this involves browser redirects). Use `prepareOAuthRedirect` to obtain a URL to redirect to."},"loginForm":{"$ref":"#/components/schemas/BrokerLoginForm"},"envs":{"items":{"$ref":"#/components/schemas/BrokerEnvironment"},"type":"array"},"brokerName":{"$ref":"#/components/schemas/BrokerName"}},"required":["envs","brokerName"],"type":"object"},"OrderModelOrderCreate":{"type":"string","enum":["market","limit","stopMarket","stopLimit","trailingStopMarket","trailingStopLimit","ocoStopMarket","ocoStopLimit"]},"OrderModel":{"anyOf":[{"$ref":"#/components/schemas/OrderModelOrderCreate"},{"type":"string","enum":["quote","fraction","savingsPlan"]}],"description":"The `orderModel` defines how the order is executed at an exchange.\nSome of the values cannot be used for creation, i.e. currently `fraction` and `savingsPlan` (those\ntwo values only appear in order lists / receipts)."},"OrderStatus":{"type":"string","enum":["open","canceled","executed","open_executed","canceled_executed"]},"OrderValidityType":{"type":"string","enum":["AUTO","GFD","GTC","GTU","GTD","EOM"],"description":"Order validity:\n- `AUTO`: choose automatically\n- `GFD`: good for day (*today/current trading day*)\n- `GTC`: good til canceled\n- `GTD` good til given date\n- `GTU` good til ultimo (end of month)"},"Security":{"properties":{"symbol":{"type":"string"},"wkn":{"type":"string"},"isin":{"type":"string"},"name":{"type":"string"}},"type":"object","description":"A security's basic data like symbols and names."},"DateString":{"type":"string","description":"Date in the format YYYY-MM-DD"},"CurrencyCode":{"type":"string","description":"- ISO code (e.g. EUR for Euro), if it is a monetary amount\n- or 'USDT' if its Tether (https://en.wikipedia.org/wiki/Tether_(cryptocurrency)\n- or 'XXX' if it is pieces\n- or 'PRC' if it is a percentage\n- or 'PRM' if it is permil\n- or 'XXP' if it is points (as for indices)"},"Amount":{"properties":{"isRealtime":{"type":"boolean","description":"If this is present and true, a \"value is provided in realtime\" indicator can be displayed.\nIf this is present and false, a \"value is provided delayed\" indicator can be displayed.\nIf this is not present, no such indication is available."},"maxDecimals":{"type":"number","format":"double"},"minDecimals":{"type":"number","format":"double"},"currency":{"$ref":"#/components/schemas/CurrencyCode"},"date":{"$ref":"#/components/schemas/DateString","description":"If the amount is valid at a given calendar date (without daytime information), this can be set."},"timestamp":{"type":"number","format":"double","description":"If the amount is valid at a given point in time, this can be set (e.g. for quotes). This is a UNIX timestamp in milliseconds."},"value":{"type":"number","format":"double"}},"type":"object"},"MonetaryValue":{"type":"number","format":"double"},"OrderExecution":{"properties":{"crossRate":{"$ref":"#/components/schemas/MonetaryValue"},"executionStatusText":{"type":"string"},"executedDateTime":{"type":"string","format":"date-time"},"totalAmount":{"$ref":"#/components/schemas/Amount","description":"\"Biw.OrderReceipt.Execution.TotalAmount\": \"Betrag inkl. Gebühren und Steuern\","},"amount":{"$ref":"#/components/schemas/Amount","description":"\"Biw.OrderReceipt.Execution.Amount\": \"Betrag ohne Gebühren\","},"tax":{"$ref":"#/components/schemas/Amount"},"transactionTax":{"$ref":"#/components/schemas/Amount","description":"\"Biw.OrderReceipt.Execution.TransactionTax\": \"Finanztransaktionssteuer\","},"quote":{"$ref":"#/components/schemas/Amount"},"size":{"$ref":"#/components/schemas/Amount"},"id":{"type":"string"}},"required":["size"],"type":"object"},"Direction":{"type":"string","enum":["buy","sell"]},"OrderExtension":{"type":"string","enum":["FOK","IOC","AON","PEA"],"description":"Some brokers and exchanges allow adding an order extension that influence how the order is executed.\n\n- `FOK`: Fill or kill\n- `ICO`: Immediate or cancel\n- `AON`: All or None\n- `PEA`: Partial executions allowed"},"CashQuotation":{"type":"string","enum":["O","K","C"],"description":"For some exchanges, this can be added to an order:\n\n- `K` Kassa\n- `O` Only Opening Auction\n- `C` Only Closing Auction"},"TrailingDistance":{"properties":{"value":{"$ref":"#/components/schemas/MonetaryValue"},"mode":{"type":"string","enum":["abs","rel"]}},"required":["value","mode"],"type":"object","description":"For orderModels `trailingStopMarket` and `trailingStopLimit`: the distance between the security's quote and the\nstop value to calculate."},"OrderValidity":{"properties":{"eom":{"type":"string"},"date":{"$ref":"#/components/schemas/DateString"},"type":{"$ref":"#/components/schemas/OrderValidityType"}},"required":["type"],"type":"object","description":"Defines how long an order is valid."},"Order":{"properties":{"stopLoss":{"$ref":"#/components/schemas/MonetaryValue"},"takeProfit":{"$ref":"#/components/schemas/MonetaryValue"},"ifDoneLimit":{"$ref":"#/components/schemas/MonetaryValue"},"quoteLimit":{"$ref":"#/components/schemas/MonetaryValue","description":"If supported by the broker, an optional limit can be added to a quote trade."},"validity":{"$ref":"#/components/schemas/OrderValidity"},"trailingLimitTolerance":{"$ref":"#/components/schemas/MonetaryValue","description":"For orderModel `trailingStopLimit`: when the trailing stop has been reached, the tolerance\nvalue is added to (for buy orders) or subtracted from (for sell orders) the stop value to obtain\na limit value. After that, the order can be regarded as a limit order with that limit value."},"trailingDistance":{"$ref":"#/components/schemas/TrailingDistance"},"stopLimit":{"$ref":"#/components/schemas/MonetaryValue"},"stop":{"$ref":"#/components/schemas/MonetaryValue"},"limit":{"$ref":"#/components/schemas/MonetaryValue"},"cashQuotation":{"$ref":"#/components/schemas/CashQuotation"},"orderExtension":{"$ref":"#/components/schemas/OrderExtension","description":"(AllOrNone/Immediate or Cancel/Fill or Kill)"},"size":{"type":"number","format":"double"},"isin":{"type":"string"},"brokerExchangeId":{"type":"string"},"direction":{"$ref":"#/components/schemas/Direction"},"portfolioId":{"type":"string"},"id":{"type":"string"},"orderModel":{"$ref":"#/components/schemas/OrderModel"},"displayNo":{"type":"string","description":"The order number to use in the interface to display to the user.\nSome brokers do not assign order numbers, so if this is not present, the order should be displayed without a number."},"status":{"$ref":"#/components/schemas/OrderStatus"},"statusText":{"type":"string","description":"Order status as text (may be broker-specific, only used for displaying it to users)."},"allowsChangeSize":{"type":"boolean","description":"If `true`, the order size can be changed"},"allowsChangeValidityTypes":{"items":{"$ref":"#/components/schemas/OrderValidityType"},"type":"array","description":"If set, the validity of the order can be changed to the given types."},"allowsChangeLimit":{"type":"boolean","description":"If true, the limit of the order can be changed."},"allowsChangeStopLimit":{"type":"boolean","description":"If true, the stop limit of the order can be changed."},"allowsChangeStop":{"type":"boolean","description":"If true, the stop of the order can be changed."},"allowsChangeTrailingDistance":{"type":"boolean","description":"If true, the trailing distance of the order can be changed."},"allowsCancel":{"type":"boolean","description":"If `true`, the order can be canceled"},"allowsChangeOrderModels":{"items":{"$ref":"#/components/schemas/OrderModel"},"type":"array","description":"If set, the orderModel may be changed to one of the given orderModels."},"allowsCancelAllOrderParts":{"type":"boolean","description":"If present in the order object and `true`, the order is part of a combination order (e.g. OCO order) and it is possible\nto cancel the entire combination order using `cancelOrder` (TODO flag for cancelAll)."},"exchangeName":{"type":"string","description":"Name of the exchange as provided by the broker."},"exchangeId":{"type":"number","format":"double","description":"The mapped exchange id, as retrievable in the the `/exchanges` endpoint."},"createdAt":{"type":"string","format":"date-time","description":"Timestamp of the order creation."},"executedAt":{"type":"string","format":"date-time","description":"For fully executed orders: the timestamp of the *latest* execution."},"sourceData":{"type":"string","description":"Contains original broker data (in the broker's data format)."},"security":{"$ref":"#/components/schemas/Security","description":"Security data, as provided by the broker."},"showAsDisabled":{"type":"boolean","description":"Order is visible, but it cannot be interacted with (e.g. because it is the discarded part of a combination order).\nIf this is present and `true`, it should be displayed to the user, but visibily disabled."},"hasNoOrderReceipt":{"type":"boolean","description":"If this is true, it is not possible to show a receipt for this order (this is the case if order data is incomplete in order lists)."},"orderStatusIsAwaitingParentOrder":{"type":"boolean","description":"If this is `true` (for open orders only), this order is currently awaiting the execution of a parent order."},"openSize":{"type":"number","format":"double","description":"Remaining/open size of the order"},"executedSize":{"type":"number","format":"double","description":"Already executed size of the order"},"cancelledSize":{"type":"number","format":"double","description":"Already cancelled size of the order."},"bondCurrencyIso":{"type":"string","description":"If the security is a bond, the currency ISO code to show for the size input field."},"limitCurrencyIso":{"type":"string","description":"limit (and stop etc.) currency to use for this order"},"profitLossAbs":{"$ref":"#/components/schemas/Amount","description":"If provided by the broker, the absolute profit/loss this order has produced."},"profitLossRel":{"$ref":"#/components/schemas/MonetaryValue","description":"If provided by the broker, the relative profit/loss this order has produced. 1 means +100%"},"quoteDecimals":{"type":"number","format":"double","description":"If present, defines how many decimal places should be displayed for quote values."},"sizeDecimals":{"type":"number","format":"double","description":"If present, defines how many decimal places should be displayed for size values."},"executions":{"items":{"$ref":"#/components/schemas/OrderExecution"},"type":"array","description":"If there already have been executions of this order, a list of those."},"cancellationDateTime":{"type":"string","format":"date-time","description":"For canceled orders: when the order has been canceled."},"mayObserveCurrentStop":{"type":"boolean","description":"If true, the current stop value of this order can be observed. In this case, the stop value can be subcribed via WebSocket (TODO - not implemented yet)"},"currentStop":{"$ref":"#/components/schemas/Amount","description":"For trailing stop orders, the current stop value."}},"required":["validity","size","isin","brokerExchangeId","direction","portfolioId","id","orderModel","status","statusText","allowsChangeSize","allowsCancel","exchangeId","security"],"type":"object","additionalProperties":false},"Challenge":{"properties":{"challengeExplanation":{"type":"string","description":"If the challenge needs further explanation, this may contain additional information to display to the user."},"challengePrompt":{"type":"string"},"challengePromptType":{"type":"string","enum":["text","base64png"]},"challengeId":{"type":"string"}},"required":["challengePrompt","challengePromptType","challengeId"],"type":"object"},"CancelOrderChallengeParams":{"properties":{"authMethod":{"type":"string"}},"required":["authMethod"],"type":"object"},"Record_string.never_":{"properties":{},"type":"object","description":"Construct a type with a set of properties K of type T"},"CancelOrderParams":{"anyOf":[{"$ref":"#/components/schemas/Record_string.never_"},{"properties":{"challengeResponse":{"type":"string"},"challengeId":{"type":"string"}},"required":["challengeResponse","challengeId"],"type":"object"}]},"Partial_Pick_OrderCreate.orderModel-or-validity-or-size-or-limit-or-stop-or-stopLimit-or-trailingDistance__":{"properties":{"limit":{"$ref":"#/components/schemas/MonetaryValue"},"stopLimit":{"$ref":"#/components/schemas/MonetaryValue"},"orderModel":{"$ref":"#/components/schemas/OrderModelOrderCreate"},"validity":{"$ref":"#/components/schemas/OrderValidity"},"size":{"type":"number","format":"double"},"stop":{"$ref":"#/components/schemas/MonetaryValue"},"trailingDistance":{"$ref":"#/components/schemas/TrailingDistance"}},"type":"object","description":"Make all properties in T optional"},"OrderChanges":{"$ref":"#/components/schemas/Partial_Pick_OrderCreate.orderModel-or-validity-or-size-or-limit-or-stop-or-stopLimit-or-trailingDistance__"},"ChangeOrderChallengeParams":{"properties":{"changes":{"$ref":"#/components/schemas/OrderChanges"},"authMethod":{"type":"string"}},"required":["changes","authMethod"],"type":"object"},"CostDetailsLink":{"properties":{"footerText":{"type":"string"},"linkTitle":{"type":"string"},"url":{"type":"string"}},"type":"object"},"GenericTableRowSubheading":{"properties":{"subheading":{"type":"string"}},"required":["subheading"],"type":"object"},"GenericTableRowText":{"properties":{"text":{"type":"string"}},"required":["text"],"type":"object"},"GenericTableRowValueLinkPortfolio":{"properties":{"text":{"type":"string"},"portfolioId":{"type":"string"},"type":{"type":"string","enum":["portfolio"],"nullable":false}},"required":["text","portfolioId","type"],"type":"object"},"GenericTableRowValueLinkUrl":{"properties":{"url":{"type":"string"},"text":{"type":"string"},"type":{"type":"string","enum":["url"],"nullable":false}},"required":["url","text","type"],"type":"object"},"GenericTableRowValueLink":{"anyOf":[{"$ref":"#/components/schemas/GenericTableRowValueLinkPortfolio"},{"$ref":"#/components/schemas/GenericTableRowValueLinkUrl"}]},"GenericTableRowValue":{"anyOf":[{"properties":{"value":{"type":"string"},"type":{"type":"string","enum":["text"],"nullable":false}},"required":["value","type"],"type":"object"},{"properties":{"currency":{"type":"string"},"maxDecimals":{"type":"number","format":"double"},"minDecimals":{"type":"number","format":"double"},"value":{"type":"number","format":"double"},"type":{"type":"string","enum":["amount"],"nullable":false}},"required":["value","type"],"type":"object"},{"properties":{"value":{"$ref":"#/components/schemas/Amount"},"type":{"type":"string","enum":["amount"],"nullable":false}},"required":["value","type"],"type":"object"},{"properties":{"value":{"type":"number","format":"double"},"type":{"type":"string","enum":["datetime"],"nullable":false}},"required":["value","type"],"type":"object"},{"properties":{"value":{"$ref":"#/components/schemas/GenericTableRowValueLink"},"type":{"type":"string","enum":["link"],"nullable":false}},"required":["value","type"],"type":"object"}]},"GenericTableRowEntry":{"properties":{"value":{"$ref":"#/components/schemas/GenericTableRowValue"},"isImportant":{"type":"boolean"},"caption":{"type":"string"},"id":{"type":"string"}},"required":["value","caption"],"type":"object"},"GenericTableRow":{"anyOf":[{"$ref":"#/components/schemas/GenericTableRowSubheading"},{"$ref":"#/components/schemas/GenericTableRowText"},{"$ref":"#/components/schemas/GenericTableRowEntry"}]},"GenericTable":{"properties":{"detailsLink":{"$ref":"#/components/schemas/CostDetailsLink"},"footerHtml":{"type":"string"},"rows":{"items":{"$ref":"#/components/schemas/GenericTableRow"},"type":"array"}},"type":"object"},"OrderCostEstimation":{"properties":{"entryCosts":{"$ref":"#/components/schemas/Amount","description":"Entry costs for the order."},"transactionTax":{"$ref":"#/components/schemas/Amount","description":"Financial transaction tax."},"totalCosts":{"$ref":"#/components/schemas/Amount","description":"The total amount spent for this order."},"expectedCounterValue":{"$ref":"#/components/schemas/Amount","description":"Expected counter value when order is executed."},"orderFees":{"$ref":"#/components/schemas/Amount","description":"Orderkosten (Summe aus Provision, Handelsplatzentgelt, Courtage)"},"orderFeesExplanation":{"type":"string","description":"Detailed explanation for order fees"},"costAcceptancePrompt":{"type":"string","description":"If present, users have to accept this message before creating an order.\nIf accepting the costs and performing the order is one click (which is allowed), the create order button label\nmust contain the information that costs are accepted."},"detailedTable":{"$ref":"#/components/schemas/GenericTable","description":"If present, a detailed tabular representation of the order cost estimation."},"costDetailsLink":{"$ref":"#/components/schemas/CostDetailsLink","description":"If available, a direct link to cost details."}},"type":"object","additionalProperties":false},"EstimateChangeOrderCostsParams":{"properties":{"changes":{"$ref":"#/components/schemas/OrderChanges"}},"required":["changes"],"type":"object"},"ChangeOrderParams":{"properties":{"changes":{"$ref":"#/components/schemas/OrderChanges"},"challengeResponse":{"type":"string"},"challengeId":{"type":"string"}},"required":["changes","challengeResponse","challengeId"],"type":"object"},"PortfoliosResponse":{"properties":{"portfolios":{"items":{"properties":{"sessionIds":{"items":{"type":"string"},"type":"array"},"portfolioName":{"type":"string"},"brokerName":{"$ref":"#/components/schemas/BrokerName"},"id":{"type":"string"}},"required":["sessionIds","portfolioName","brokerName","id"],"type":"object"},"type":"array"}},"required":["portfolios"],"type":"object"},"PortfolioQuotes":{"properties":{"profitLossAbsPrevClose":{"$ref":"#/components/schemas/Amount","description":"P/L sum of all open positions, since prevClose (or buy, if that is later than prevClose)."},"profitLossRelPrevClose":{"type":"number","format":"double","description":"Relative P/L of all open positions, since prevClose (or buy, if that is later than prevClose). 1 means +100%"},"profitLossAbs":{"$ref":"#/components/schemas/Amount","description":"P/L sum of currently open positions."},"profitLossRel":{"type":"number","format":"double","description":"Relative P/L of all open positions, since acquisition. 1 means +100%"},"profitLossRelAllTime":{"type":"number","format":"double","description":"All-time relative P/L of the entire portfolio. 1 means +100%"},"profitLossAbsAllTime":{"$ref":"#/components/schemas/Amount","description":"All-time profit loss for the portfolio since its creation (including closed positions of the past)."},"totalValue":{"$ref":"#/components/schemas/Amount","description":"The total value, usually `cashAccountBalance + positionValue`."},"cashAccountBalance":{"$ref":"#/components/schemas/Amount","description":"Booked amount of the cash account assigned to this portfolio."},"availableCash":{"$ref":"#/components/schemas/Amount","description":"Cash that can be used for orders. It should probably be renamed to buyingPower to be consistent with the buyingPower Observable. This has to be checked."},"positionValue":{"$ref":"#/components/schemas/Amount","description":"Current total amount of the open positions."}},"required":["positionValue"],"type":"object"},"PositionValuation":{"properties":{"crossRate":{"type":"number","format":"double","description":"CrossRate that was used to convert from quotation to positionValue, if this applies here."},"positionValue":{"$ref":"#/components/schemas/Amount"},"quotation":{"$ref":"#/components/schemas/Amount"},"isDelayed":{"type":"boolean"}},"type":"object"},"Position":{"properties":{"sourceData":{"type":"string"},"commentIsEditable":{"type":"boolean","description":"True if the user may edit a comment for this position."},"comment":{"type":"string","description":"Textual comment for the position."},"profitLossRelWithDividends":{"type":"number","format":"double","description":"Relative P/L of the entire position, since acquisition, but including the dividends booked for this position (see `totalDividends`). 1 means +100%"},"profitLossAbsWithDividends":{"$ref":"#/components/schemas/Amount","description":"Absolute P/L of the entire position, since acquisition, but including the dividends booked for this position (see `totalDividends`)."},"profitLossRelPrevClose":{"type":"number","format":"double","description":"Relative P/L of the entire posiiton, since \"prevClose\". 1 means +100%"},"profitLossAbsPrevClose":{"$ref":"#/components/schemas/Amount","description":"Absolute P/L of the entire position, since acquisition."},"profitLossRel":{"type":"number","format":"double","description":"Relative P/L of the entire posiiton, since acquisition. 1 means +100%"},"profitLossAbs":{"$ref":"#/components/schemas/Amount","description":"Absolute P/L of the entire position, since acquisition."},"prevCloseValuation":{"$ref":"#/components/schemas/PositionValuation","description":"\"prevClose\" position quote and value. May also be today, if it was purchased today."},"currentValuation":{"$ref":"#/components/schemas/PositionValuation","description":"Current position quote and value."},"purchaseDate":{"$ref":"#/components/schemas/DateString","description":"Date of position purchase."},"purchaseDateTime":{"type":"string","format":"date-time","description":"Date and time of position purchase. If not set, purchaseDate may at least contain the date."},"purchaseValuation":{"$ref":"#/components/schemas/PositionValuation","description":"Position quote and value at acquisition."},"availableSize":{"type":"number","format":"double","description":"How much of the position is available for sale."},"brokerExchangeId":{"type":"string","description":"The exchange id as defined by the broker."},"exchangeId":{"type":"number","format":"double","description":"The mapped exchange id, as retrievable in the the `/exchanges` endpoint."},"security":{"$ref":"#/components/schemas/Security"},"sizeUnit":{"$ref":"#/components/schemas/CurrencyCode"},"size":{"type":"number","format":"double"},"id":{"type":"string"}},"required":["availableSize","exchangeId","security","sizeUnit","size","id"],"type":"object"},"AuthMethod":{"properties":{"id":{"type":"string"},"label":{"type":"string"},"requiresChallenge":{"type":"boolean"},"getChallengeLabel":{"type":"string"},"isDefaultMethod":{"type":"boolean"},"tanFieldLabel":{"type":"string"},"isDecoupled":{"type":"boolean","description":"If operations are not confirmed with a TAN (e.g. \"Push TAN\", where the operation is confirmed in the broker's authorization app),\nthe confirmation/perform step is only the user telling us that she has confirmed the operation.\nDefaults to `false`"},"challengeLabel":{"type":"string"}},"required":["id","label","requiresChallenge"],"type":"object","additionalProperties":false},"AuthInfo":{"properties":{"allOperationsRequireSessionTan":{"type":"boolean","description":"If this is present and true, the only operation that the AuthMethods can be used to is to activate Session TAN (`session.authorizeSessionTan`).\nAll other operations (e.g. order creation etc.) require Session TAN to be activated first."},"authMethods":{"items":{"$ref":"#/components/schemas/AuthMethod"},"type":"array"},"sessionTanSupported":{"type":"boolean"},"sessionTanActive":{"type":"boolean"}},"type":"object"},"Session":{"properties":{"syncError":{},"authInfo":{"$ref":"#/components/schemas/AuthInfo"},"lastSuccessfulSync":{"type":"string","format":"date-time"},"brokerName":{"type":"string"},"id":{"type":"string"}},"required":["syncError","authInfo","lastSuccessfulSync","brokerName","id"],"type":"object"},"SessionResponse":{"properties":{"sessions":{"items":{"$ref":"#/components/schemas/Session"},"type":"array"}},"required":["sessions"],"type":"object"},"PrepareOAuthRedirectParams":{"properties":{"returnToUrl":{"type":"string"},"env":{"type":"string"},"brokerName":{"$ref":"#/components/schemas/BrokerName"}},"required":["returnToUrl","env","brokerName"],"type":"object"},"ConfirmOAuthParams":{"properties":{"code":{"type":"string"},"ticketId":{"type":"string"}},"required":["code","ticketId"],"type":"object"},"LoginResultReadyPublic":{"properties":{"sessionId":{"type":"string"},"state":{"type":"string","enum":["ready"],"nullable":false}},"required":["sessionId","state"],"type":"object"},"LoginResultChallengePublic":{"properties":{"challenge":{"$ref":"#/components/schemas/Challenge"},"state":{"type":"string","enum":["challenge"],"nullable":false}},"required":["challenge","state"],"type":"object"},"LoginResultPublic":{"anyOf":[{"$ref":"#/components/schemas/LoginResultReadyPublic"},{"$ref":"#/components/schemas/LoginResultChallengePublic"}]},"AddSessionParams":{"properties":{"password":{"type":"string"},"username":{"type":"string"},"env":{"type":"string"},"brokerName":{"$ref":"#/components/schemas/BrokerName"}},"required":["password","username","env","brokerName"],"type":"object"},"AddSessionCompleteChallengeParams":{"properties":{"challengeResponse":{"type":"string"},"challengeId":{"type":"string"}},"required":["challengeResponse","challengeId"],"type":"object"},"CreateTanChallengeParams":{"properties":{"authMethod":{"type":"string"}},"required":["authMethod"],"type":"object"},"EnableSessionTanResponse":{"anyOf":[{},{"properties":{"decoupledOperationId":{"type":"string"}},"required":["decoupledOperationId"],"type":"object"}]},"EnableSessionTanParamsChallengeResponse":{"properties":{"challengeResponse":{"type":"string"},"challengeId":{"type":"string"},"kind":{"type":"string","enum":["challengeResponse"],"nullable":false}},"required":["challengeResponse","challengeId","kind"],"type":"object"},"EnableSessionTanParamsDecoupled":{"properties":{"authMethod":{"type":"string"},"kind":{"type":"string","enum":["decoupled"],"nullable":false}},"required":["authMethod","kind"],"type":"object"},"EnableSessionTanParams":{"anyOf":[{"$ref":"#/components/schemas/EnableSessionTanParamsChallengeResponse"},{"$ref":"#/components/schemas/EnableSessionTanParamsDecoupled"}]},"DecoupledOperationState":{"type":"string","enum":["AUTHORIZATION_ABORTED","AUTHORIZATION_INITIAL","AUTHORIZATION_USER_ACCEPTED","AUTHORIZATION_USER_CANCELED"]},"EndSessionTanResult":{"properties":{"message":{"type":"string"}},"type":"object"},"Instrument":{"properties":{"name":{"type":"string"},"isin":{"type":"string"}},"required":["name","isin"],"type":"object"},"RiskClassInfo":{"properties":{"msg":{"type":"string","description":"risk class message to display (may contain (some) HTML!). The user must accept the message."},"onlySellAllowed":{"type":"boolean","description":"If true, only sell is allowed for this instrument."},"legalHint":{"type":"string","description":"If set, must be displayed as a static hint (which the user does not need to confirm) before the order button. May contain (some) HTML."}},"required":["msg"],"type":"object","additionalProperties":false},"Partial_Record_OrderModel.OrderValidityType-Array__":{"properties":{"quote":{"items":{"$ref":"#/components/schemas/OrderValidityType"},"type":"array"},"fraction":{"items":{"$ref":"#/components/schemas/OrderValidityType"},"type":"array"},"savingsPlan":{"items":{"$ref":"#/components/schemas/OrderValidityType"},"type":"array"},"market":{"items":{"$ref":"#/components/schemas/OrderValidityType"},"type":"array"},"limit":{"items":{"$ref":"#/components/schemas/OrderValidityType"},"type":"array"},"stopMarket":{"items":{"$ref":"#/components/schemas/OrderValidityType"},"type":"array"},"stopLimit":{"items":{"$ref":"#/components/schemas/OrderValidityType"},"type":"array"},"trailingStopMarket":{"items":{"$ref":"#/components/schemas/OrderValidityType"},"type":"array"},"trailingStopLimit":{"items":{"$ref":"#/components/schemas/OrderValidityType"},"type":"array"},"ocoStopMarket":{"items":{"$ref":"#/components/schemas/OrderValidityType"},"type":"array"},"ocoStopLimit":{"items":{"$ref":"#/components/schemas/OrderValidityType"},"type":"array"}},"type":"object","description":"Make all properties in T optional"},"Partial_Record_OrderModel.OrderValidity__":{"properties":{"quote":{"$ref":"#/components/schemas/OrderValidity"},"fraction":{"$ref":"#/components/schemas/OrderValidity"},"savingsPlan":{"$ref":"#/components/schemas/OrderValidity"},"market":{"$ref":"#/components/schemas/OrderValidity"},"limit":{"$ref":"#/components/schemas/OrderValidity"},"stopMarket":{"$ref":"#/components/schemas/OrderValidity"},"stopLimit":{"$ref":"#/components/schemas/OrderValidity"},"trailingStopMarket":{"$ref":"#/components/schemas/OrderValidity"},"trailingStopLimit":{"$ref":"#/components/schemas/OrderValidity"},"ocoStopMarket":{"$ref":"#/components/schemas/OrderValidity"},"ocoStopLimit":{"$ref":"#/components/schemas/OrderValidity"}},"type":"object","description":"Make all properties in T optional"},"Exchange":{"properties":{"id":{"type":"string"},"label":{"type":"string"},"orderModelsSell":{"items":{"$ref":"#/components/schemas/OrderModel"},"type":"array"},"orderModelsBuy":{"items":{"$ref":"#/components/schemas/OrderModel"},"type":"array"},"hideOrderModel":{"type":"boolean","description":"only one orderModel is available and it should not be displayed to the user (e.g. for fund orders...)"},"allowsQuoteModeLimit":{"type":"boolean","description":"If true, quote orders can be created with quoteMode=limit and quoteOrderOpts.quoteLimit set to a limit."},"allowsIfDoneLimit":{"type":"boolean","description":"If this is true, limit buy orders may have the additional \"ifDoneLimit\" set."},"validityTypesByOrderModel":{"$ref":"#/components/schemas/Partial_Record_OrderModel.OrderValidityType-Array__","description":"If defined and `allowsTakeProfit` or `allowsStopLoss`, availability of TP/SL is restricted to these OrderModels."},"defaultValidityByOrderModel":{"$ref":"#/components/schemas/Partial_Record_OrderModel.OrderValidity__","description":"If present, contains default values for validity based on the orderModel."}},"required":["id","label","orderModelsSell","orderModelsBuy"],"type":"object","additionalProperties":false},"PreparedTrade":{"properties":{"costEstimationMustBeShown":{"type":"boolean"},"exchanges":{"items":{"$ref":"#/components/schemas/Exchange"},"type":"array"},"strikingHint":{"type":"string","description":"If present, this hint must be displayed in the order form. It should be visible during the order\ncreation process, but does not need to be accepted by the user explicitly."},"riskClassInfo":{"$ref":"#/components/schemas/RiskClassInfo"},"instrument":{"$ref":"#/components/schemas/Instrument"}},"required":["costEstimationMustBeShown","exchanges","riskClassInfo","instrument"],"type":"object"},"NoSessionAvailableForPortfolio":{"properties":{"code":{"type":"string","enum":["NO_SESSION_AVAILABLE_FOR_PORTFOLIO"],"nullable":false}},"required":["code"],"type":"object"},"SecurityNotAvailableForTrading":{"properties":{"code":{"type":"string","enum":["SECURITY_NOT_FOUND"],"nullable":false}},"required":["code"],"type":"object"},"GetQuoteResult":{"properties":{"quoteId":{"type":"string"},"isin":{"type":"string"},"direction":{"$ref":"#/components/schemas/Direction"},"size":{"type":"number","format":"double"},"sourceName":{"type":"string"},"quotation":{"$ref":"#/components/schemas/Amount"},"expiration":{"properties":{"expires":{"type":"string","format":"date-time"},"started":{"type":"string","format":"date-time"}},"required":["expires","started"],"type":"object"},"costEstimation":{"$ref":"#/components/schemas/OrderCostEstimation","description":"If the broker returns a cost estimation together with the quote, it will also be part of the brokerize quote."},"costEstimationToken":{"type":"string","description":"If the broker does not return a cost estimation summary, but it is possible to retrieve a cost estimation summary\nusing the `GetCostEstimation` token (TODO), the token will be returned here."}},"required":["quoteId","isin","direction","size","quotation","expiration"],"type":"object","additionalProperties":false},"GetQuoteParams":{"properties":{"brokerExchangeId":{"type":"string"},"size":{"type":"number","format":"double"},"direction":{"$ref":"#/components/schemas/Direction"},"isin":{"type":"string"}},"required":["brokerExchangeId","size","direction","isin"],"type":"object"},"OrderCreate":{"properties":{"stopLoss":{"$ref":"#/components/schemas/MonetaryValue"},"takeProfit":{"$ref":"#/components/schemas/MonetaryValue"},"ifDoneLimit":{"$ref":"#/components/schemas/MonetaryValue"},"quoteLimit":{"$ref":"#/components/schemas/MonetaryValue","description":"If supported by the broker, an optional limit can be added to a quote trade."},"validity":{"$ref":"#/components/schemas/OrderValidity"},"trailingLimitTolerance":{"$ref":"#/components/schemas/MonetaryValue","description":"For orderModel `trailingStopLimit`: when the trailing stop has been reached, the tolerance\nvalue is added to (for buy orders) or subtracted from (for sell orders) the stop value to obtain\na limit value. After that, the order can be regarded as a limit order with that limit value."},"trailingDistance":{"$ref":"#/components/schemas/TrailingDistance"},"stopLimit":{"$ref":"#/components/schemas/MonetaryValue"},"stop":{"$ref":"#/components/schemas/MonetaryValue"},"limit":{"$ref":"#/components/schemas/MonetaryValue"},"cashQuotation":{"$ref":"#/components/schemas/CashQuotation"},"orderExtension":{"$ref":"#/components/schemas/OrderExtension","description":"(AllOrNone/Immediate or Cancel/Fill or Kill)"},"size":{"type":"number","format":"double"},"isin":{"type":"string"},"brokerExchangeId":{"type":"string"},"direction":{"$ref":"#/components/schemas/Direction"},"portfolioId":{"type":"string"},"orderModel":{"$ref":"#/components/schemas/OrderModelOrderCreate"}},"required":["validity","size","isin","brokerExchangeId","direction","portfolioId","orderModel"],"type":"object","additionalProperties":false},"QuoteOrderCreate":{"properties":{"validity":{"$ref":"#/components/schemas/OrderValidity"},"quoteLimit":{"$ref":"#/components/schemas/MonetaryValue"},"quoteId":{"type":"string","description":"The quoteId, as retrieved in `GetQuote`"},"size":{"type":"number","format":"double"},"isin":{"type":"string"},"brokerExchangeId":{"type":"string"},"direction":{"$ref":"#/components/schemas/Direction"},"orderModel":{"type":"string","enum":["quote"],"nullable":false},"portfolioId":{"type":"string"}},"required":["quoteId","size","isin","brokerExchangeId","direction","orderModel","portfolioId"],"type":"object"},"OrderForCreate":{"anyOf":[{"$ref":"#/components/schemas/OrderCreate"},{"$ref":"#/components/schemas/QuoteOrderCreate"}]},"CreateOrderChallengeParams":{"properties":{"acceptHintId":{"type":"string","description":"If the order has been rejected with code `MUST_ACCEPT_HINT` before, the order creation can be retried with setting the\n`acceptHintId` accordingly after letting the user accept the hint."},"authMethod":{"type":"string"},"order":{"$ref":"#/components/schemas/OrderForCreate"}},"required":["order"],"type":"object"},"GetCostEstimationParams":{"properties":{"order":{"$ref":"#/components/schemas/OrderForCreate"}},"required":["order"],"type":"object"},"Hint":{"properties":{"text":{"type":"string"},"id":{"type":"string"}},"required":["text","id"],"type":"object"},"MustAcceptHint":{"properties":{"hint":{"$ref":"#/components/schemas/Hint"},"code":{"type":"string","enum":["MUST_ACCEPT_HINT"],"nullable":false}},"required":["hint","code"],"type":"object"},"CreateOrderParamsWithChallengeResponse":{"properties":{"acceptHintId":{"type":"string","description":"If the order has been rejected with code `MUST_ACCEPT_HINT` before, the order creation can be retried with setting the\n`acceptHintId` accordingly after letting the user accept the hint."},"authMethod":{"type":"string"},"order":{"$ref":"#/components/schemas/OrderForCreate"},"challengeResponse":{"type":"string"},"challengeId":{"type":"string"}},"required":["order","challengeResponse","challengeId"],"type":"object","additionalProperties":false},"CreateOrderParams":{"anyOf":[{"$ref":"#/components/schemas/CreateOrderParamsWithChallengeResponse"},{"$ref":"#/components/schemas/CreateOrderChallengeParams"}]}},"securitySchemes":{"cookieAuth":{"type":"apiKey","in":"cookie","name":"_id","description":"Requests are authenticated by providing an HTTP-Only cookie `_id` which is a JWT token stored in the browser by calling the `/login` endpoint. This allows clients to not have to care about authentication at all - it is provided by 3rd party cookies which are not visible to the frontend at all. However, this comes with limitations (e.g. some browsers do not send those cookies if they are under a 3rd party domain)."},"idToken":{"type":"apiKey","in":"header","name":"x-access-token","description":"Requests are authenticated by providing an header `x-access-token` which is a JWT token retrieved either from the `createguest` endpoint or retrieved for a user from the amazon cognito pool."}}},"info":{"title":"brokerize","version":"0.0.1-preview","contact":{},"description":"The brokerize API allows clients to implement multi-brokerage easily with a unified interface.\n\n# user accounts & temporary guest sessions\n\nUsers either have their own account at brokerize or create an ephemeral anonymous account while they use it. In the latter case, all data is deleted automatically when the session is ended. If users decide to create a proper account, they can log in to brokerize any time with their credentials and keep their data stored as long as they wish.\n\n# connecting brokers and synchronizing data to brokerize\n\nThe general approach is that users connect their brokerage accounts from either the official brokerize UI or from an app's interface using their broker credentials. To find out which brokers can be used for logging in, the [GetBrokers](#operation/GetBrokers) endpoint must be used. For example, an end user can add a Consorsbank login by calling [AddSession](#operation/AddSession). Note that brokerize *never* saves the login credentials, but only tokens / session ids that are issued by the brokers. Those are discarded as soon as the user logs out from the broker using [LogoutSession](#operation/LogoutSession).\n\nAs soon as users have connected one or more broker sessions, those sessions are synced into their user account. This means that the list of portfolios, positions and orders are stored in the brokerize database. All synchronized portfolios and their data are accessible using the portfolio operations (e.g. [GetPortfolios](#operation/GetPortfolios)). Even after the user disconnects a session (or it times out at the broker etc.), the data remains available via the API until deleted by the user ([DeletePortfolio](#operation/DeletePortfolio)). This means that users can easily look at the last known state of each portfolio without needing to log in. As soon as they log in again via [AddSession](#operation/AddSession), the data is updated again (i.e. the synchronized portfolio gets connected to an \"online session\" again).\n\nData is automatically synchronized in the background, but clients can also request a sync using [TriggerSessionSync](#operation/TriggerSessionSync).\n\n\n# performing actions in portfolios\nActions can be performed in portfolios that have online sessions. Using [GetAuthInfo](#operation/GetAuthInfo), different methods for authorising an action can be figured out. For example, some brokers support mTAN, where an SMS is sent for a specific use-case (e.g. a set of parameters for order creation). Other brokers allow authorizing actions with their mobile apps. Brokerizes unifies that information in `AuthInfo`. Usually, an action requires creation of a challenge (for mTAN that would be when the broker sends an SMS with a code) and later the actual action with a response for that challenge. The following actions are implemented:\n\n- Session TAN handling (for performing other actions in portfolios without further per-case authorization)\n    - [CreateSessionTanChallenge](#operation/CreateSessionTanChallenge)\n    - [EnableSessionTan](#operation/EnableSessionTan)\n    - [EndSessionTan](#operation/EndSessionTan)\n- Create a trade\n    - [PrepareTrade](#operation/PrepareTrade) to figure out how a given security can be traded in a portfolio\n    - [CreateTradeChallenge](#operation/CreateTradeChallenge) to (for example) request a TAN for a trade\n    - [CreateTrade](#operation/CreateTrade) to perform the trade.\n- Edit an order (e.g. cancel or change specific fields)\n    - *not implemented yet*\n\n# rate limits\nCurrently a rate limit of 100 requests per 10 seconds per client/userId combination is implemented for all endpoints. Clients should implement ways to deal with the http `429` status code and can inspect the `Retry-After` header to implement appropriate waiting behavior.","x-logo":{"url":"/logo.svg","backgroundColor":"#FFFFFF","altText":"brokerize logo"}},"openapi":"3.0.0","paths":{"/brokers":{"get":{"operationId":"GetBrokers","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"properties":{"brokers":{"items":{"$ref":"#/components/schemas/BrokerMeta"},"type":"array"}},"required":["brokers"],"type":"object"}}}}},"description":"List all brokers that users can log in to. Describes *how* to login by specifying either a `loginForm` or some other means\nof login (e.g. the brokers' OAuth process in the future).","security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[]}},"/demo/accounts":{"post":{"operationId":"CreateDemoAccount","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"properties":{"id":{"type":"string"}},"required":["id"],"type":"object"},"examples":{"Example 1":{"value":{"id":42}}}}}}},"description":"Create an account at the demo broker for the logged-in user. The account will have a default\nset of two empty portfolios.\n\nThe account as well as the two portfolios have a randomly generated name.\n\nTo log into an account, use the account's generated name as username (Account name) in `AddSession`.\n- with the password `42`, the login will succeed immediately\n- with the password `1337`, a challenge will be returned which must be completed by using `addSessionCompleteChallenge` (with a challengeResponse `42`)\n- other passwords will not allow to log in\n\nThe demo broker implements the following pre-defined trade behaviors, so that different flows can be tested:\n- ISIN US0378331005 (Apple):\n  - market buy order is executed after 10 seconds by the backend at a random quote\n  - stop buy order stays open forever (can be used for testing cancellation)\n- ISIN LU0378438732 (a DAX ETF)\n  - orders are rejected with code `ORDER_REJECTED` immediately\n- ISIN US4180561072 (Hasbro)\n  - only quote orders on one exchange are supported\n  - the quotes are valid for 45 seconds\n  - quote value is always `42`\n  - the order gets executed immediately\n- ISIN US98980L1017 (Zoom)\n  - only market orders (both buy and sell) are suppored on one exchange\n  - orders are executed immediately at a random quote\n  - order creation requires the user to accept a hint (i.e. first try will result in a `MUST_ACCEPT_HINT` error)\n- all other orders will be canceled after 3 seconds","tags":["demobroker"],"security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[]},"get":{"operationId":"GetDemoAccounts","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"properties":{"accounts":{"items":{"properties":{"accountName":{"type":"string"},"accountId":{"type":"string"}},"required":["accountName","accountId"],"type":"object"},"type":"array"}},"required":["accounts"],"type":"object"}}}}},"description":"List all demo accounts that the user has in her account. The account name can be used as the login username in the\ndemo broker login process.","tags":["demobroker"],"security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[]}},"/demo/accounts/{accountId}":{"delete":{"operationId":"DeleteDemoAccount","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"properties":{"msg":{"type":"string"}},"required":["msg"],"type":"object"}}}}},"tags":["demobroker"],"security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[{"in":"path","name":"accountId","required":true,"schema":{"type":"string"}}]}},"/exchanges":{"get":{"operationId":"GetExchanges","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"properties":{"exchanges":{"items":{"properties":{"name":{"type":"string"},"id":{"type":"number","format":"double"}},"required":["name","id"],"type":"object"},"type":"array"}},"required":["exchanges"],"type":"object"}}}}},"description":"List all exchanges mapped in brokerize.\n\nBrokers provide their own list of exchanges with any order preparation request, so there\nmay be cases where a broker exchange is not mapped to this brokerize exchange list. This is\ntotally valid: this list serves as a known subset of exchanges to facilitate switching between\nbrokers or mapping to your own exchange database.","security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[]}},"/order/{id}":{"get":{"operationId":"GetOrder","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"properties":{"order":{"$ref":"#/components/schemas/Order"}},"required":["order"],"type":"object"}}}}},"security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"}}]}},"/order/{id}/cancelChallenge":{"post":{"operationId":"CreateCancelOrderChallenge","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Challenge"}}}}},"description":"Create a cancel order challenge","security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CancelOrderChallengeParams"}}}}}},"/order/{id}/cancel":{"post":{"operationId":"CancelOrder","responses":{"204":{"description":"No content"}},"description":"Actually cancel the order","security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CancelOrderParams"}}}}}},"/order/{id}/changeChallenge":{"post":{"operationId":"CreateChangeOrderChallenge","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Challenge"}}}}},"description":"Create a change order challenge","security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangeOrderChallengeParams"}}}}}},"/order/{id}/changeCostEstimation":{"post":{"operationId":"GetChangeOrderCostEstimation","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderCostEstimation"}}}}},"description":"Get an order cost estimation for an order update.","security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EstimateChangeOrderCostsParams"}}}}}},"/order/{id}/change":{"post":{"operationId":"ChangeOrder","responses":{"204":{"description":"No content"}},"description":"Actually change the order","security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangeOrderParams"}}}}}},"/portfolios":{"get":{"operationId":"GetPortfolios","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PortfoliosResponse"}}}}},"security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[]}},"/portfolios/{portfolioId}":{"delete":{"operationId":"DeletePortfolio","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"properties":{"msg":{"type":"string"}},"required":["msg"],"type":"object"}}}}},"security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[{"in":"path","name":"portfolioId","required":true,"schema":{"type":"string"}}]}},"/portfolios/{portfolioId}/quotes":{"get":{"operationId":"GetPortfolioQuotes","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"properties":{"quotes":{"$ref":"#/components/schemas/PortfolioQuotes"}},"required":["quotes"],"type":"object"}}}}},"security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[{"in":"path","name":"portfolioId","required":true,"schema":{"type":"string"}}]}},"/portfolios/{portfolioId}/positions":{"get":{"operationId":"GetPortfolioPositions","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"properties":{"positions":{"items":{"$ref":"#/components/schemas/Position"},"type":"array"}},"required":["positions"],"type":"object"}}}}},"security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[{"in":"path","name":"portfolioId","required":true,"schema":{"type":"string"}}]}},"/portfolios/{portfolioId}/orders":{"get":{"operationId":"GetPortfolioOrders","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"properties":{"totalCount":{"type":"number","format":"double"},"orders":{"items":{"$ref":"#/components/schemas/Order"},"type":"array"}},"required":["totalCount","orders"],"type":"object"}}}}},"security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[{"in":"path","name":"portfolioId","required":true,"schema":{"type":"string"}},{"description":"for pagination: how many items per page","in":"query","name":"take","required":false,"schema":{"format":"double","type":"number"}},{"description":"for pagination: how many items to skip (0 for first page)","in":"query","name":"skip","required":false,"schema":{"format":"double","type":"number"}},{"description":"filter by isin","in":"query","name":"isin","required":false,"schema":{"type":"string"}},{"description":"filter by statuses (comma-separated)","in":"query","name":"statuses","required":false,"schema":{"type":"string"}},{"description":"order by `<field>:<asc|desc>`, where `field` may be one of `createdAt`, `executedAt`","in":"query","name":"orderBy","required":false,"schema":{"type":"string"}}]}},"/portfolios/{portfolioId}/authinfo":{"get":{"operationId":"GetAuthInfo","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"properties":{"authInfo":{"$ref":"#/components/schemas/AuthInfo"}},"required":["authInfo"],"type":"object"}}}}},"security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[{"in":"path","name":"portfolioId","required":true,"schema":{"type":"string"}}]}},"/sessions":{"get":{"operationId":"GetSessions","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SessionResponse"}}}}},"description":"Get the currently active broker sessions of the user's account.","security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[]},"post":{"operationId":"AddSession","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResultPublic"}}}}},"security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddSessionParams"}}}}}},"/sessions/prepareOAuthRedirect":{"post":{"operationId":"PrepareOAuthRedirect","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"properties":{"redirectTo":{}},"required":["redirectTo"],"type":"object"}}}}},"description":"For brokers with `isOAuth`, sessions can not be created using `AddSession`. This is how a session\ncan be added for an OAuth-based login process:\n\n1. use `prepareOAuthRedirect` to obtain a URL to redirect to. You can provide a `returnTo` URL which will be redirect to later. Note that a list of allowed URLs has to be configured for the client.\n2. redirect the user's browser to the `redirectTo` URL\n3. after the user has logged in at the broker's interface, a redirect to `returnTo` with the URL query parameters `verifysession=1`, `code` and `ticketId` will happen\n4. the `returnTo` page must call `confirmOAuth` with the given `ticketId` and `code` to finally add the session to the user's account","security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrepareOAuthRedirectParams"}}}}}},"/sessions/confirmOAuth":{"post":{"operationId":"ConfirmOAuth","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"properties":{"sessionId":{"type":"string"}},"required":["sessionId"],"type":"object"}}}}},"description":"For brokers with OAuth login processes, this adds the session to the user's account after redirects happen. Only the user that is redirected from\nthe broker login in the browser will receive the `code`. Therforce this step ensures that the logged-in user at brokerize is the one that\nhas gone through the broker OAuth steps.","security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfirmOAuthParams"}}}}}},"/sessions/completeLogin":{"post":{"operationId":"AddSessionCompleteChallenge","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResultReadyPublic"}}}}},"description":"If login returns the state `challenge`, the login must be completed by providing a challenge response first.","security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddSessionCompleteChallengeParams"}}}}}},"/sessions/{sessionId}/sessiontanchallenge":{"post":{"operationId":"CreateSessionTanChallenge","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Challenge"}}}}},"security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[{"in":"path","name":"sessionId","required":true,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTanChallengeParams"}}}}}},"/sessions/{sessionId}/sessiontan":{"post":{"operationId":"EnableSessionTan","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnableSessionTanResponse"}}}}},"security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[{"in":"path","name":"sessionId","required":true,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnableSessionTanParams"}}}}},"delete":{"operationId":"EndSessionTan","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EndSessionTanResult"}}}}},"description":"End Session TAN for the given broker session.\n\nIf applicable, the broker may return a message with a confirmation code which can be looked up in the initial activation SMS.\nIf message is present in the response, it should be displayed to the user.","security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[{"in":"path","name":"sessionId","required":true,"schema":{"type":"string"}}]}},"/sessions/{sessionId}/decoupledOperation/{decoupledOperationId}":{"get":{"operationId":"GetDecoupledOperationStatus","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DecoupledOperationState"}}}}},"security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[{"in":"path","name":"sessionId","required":true,"schema":{"type":"string"}},{"in":"path","name":"decoupledOperationId","required":true,"schema":{"type":"string"}}]},"delete":{"operationId":"CancelDecoupledOperation","responses":{"204":{"description":"No content"}},"security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[{"in":"path","name":"sessionId","required":true,"schema":{"type":"string"}},{"in":"path","name":"decoupledOperationId","required":true,"schema":{"type":"string"}}]}},"/sessions/{sessionId}/sync":{"post":{"operationId":"TriggerSessionSync","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"properties":{"msg":{"type":"string"}},"required":["msg"],"type":"object"}}}}},"description":"Trigger a background sync process for the given broker session. This means that a sync will be\nscheduled as soon as possible. All data related to the portfolio (e.g. positions and orders) will\nbe loaded into the brokerize database.","security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[{"in":"path","name":"sessionId","required":true,"schema":{"type":"string"}}]}},"/sessions/{sessionId}":{"delete":{"operationId":"LogoutSession","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"properties":{"msg":{"type":"string"}},"required":["msg"],"type":"object"}}}}},"description":"Log out from the given broker session.","security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[{"in":"path","name":"sessionId","required":true,"schema":{"type":"string"}}]}},"/trade/prepare":{"get":{"operationId":"PrepareTrade","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"properties":{"preparedTrade":{"$ref":"#/components/schemas/PreparedTrade"}},"required":["preparedTrade"],"type":"object"}}}},"400":{"description":"No online session for given portfolio available","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NoSessionAvailableForPortfolio"}}}},"404":{"description":"Security could not be found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SecurityNotAvailableForTrading"}}}}},"description":"Prepare a trade of `isin` in the given portfolio `portfolioId`. This describes what kind of orders are supported by the broker for the security.\nThis requires the portfolio to have at least one active broker session.","tags":["trade"],"security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[{"in":"query","name":"isin","required":true,"schema":{"type":"string"}},{"in":"query","name":"portfolioId","required":true,"schema":{"type":"string"}}]}},"/trade/quote":{"post":{"operationId":"GetQuote","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetQuoteResult"}}}}},"description":"Get a quote to use with `orderModel=quote`. The actual quote trade is then performed using `createTradeChallenge` / `createTrade` as\nfor other orderModels.","tags":["trade"],"security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[{"in":"query","name":"portfolioId","required":true,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetQuoteParams"}}}}}},"/trade/challenge":{"post":{"operationId":"CreateTradeChallenge","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Challenge"}}}}},"description":"Create a challenge","tags":["trade"],"security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOrderChallengeParams"}}}}}},"/trade/costEstimation":{"post":{"operationId":"GetCostEstimation","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderCostEstimation"}}}}},"tags":["trade"],"security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetCostEstimationParams"}}}}}},"/trade/create":{"post":{"operationId":"CreateTrade","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"properties":{"orderId":{}},"required":["orderId"],"type":"object"}}}},"400":{"description":"Hint must be accepted by the user first.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MustAcceptHint"},"examples":{"Example 1":{"value":{"code":"MUST_ACCEPT_HINT","hint":{"id":"fees_for_low_order_volume","text":"The order volume for this order is very low and will result in extra fees. Those fees have to be accepted first."}}}}}}}},"description":"Create a trade.\n\nIt is possible that the broker rejects the order because of some extra hints that the user must accept (which can not be figured\nout in `prepareTrade`, e.g. because the order volume has to be determined first). In thise case, the `MUST_ACCEPT_HINT` error\ncode is returned. The user can choose to accept that hint. If that is the case, the request can be\nretried with the `acceptHintId` parameter.","tags":["trade"],"security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOrderParams"}}}}}},"/user":{"get":{"operationId":"GetUser","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"properties":{"userId":{"type":"string"}},"required":["userId"],"type":"object"}}}}},"description":"Checks the provided authentication and returns the logged-in user.","security":[{"cookieAuth":[]},{"idToken":[]}],"parameters":[]}},"/user/guest":{"post":{"operationId":"CreateGuestUser","responses":{"200":{"description":"Ok","content":{"application/json":{"schema":{"properties":{"idToken":{"type":"string"}},"required":["idToken"],"type":"object"}}}}},"description":"Create a guest user and return an JWT token which can be used to access resources.\nThe user as well as the token have a lifetime of 24 hours.","security":[],"parameters":[]}},"/websocket":{"get":{"operationId":"Websocket","description":"Most operations at brokerize have asynchronous effects.\n\nFor example, consider the flow of an order: when the user creates an order, it will not immediately appear in order list endpoints, because usually brokers take a few seconds until they are retrievable in those lists. Also, after a while, the order may be executed or cancelled asynchronously by the stock exchange.\n\nA common solution for frontends would be to reload the order list regularly. However data is then either delayed or there will be many more requests than needed.\n\nThe brokerize websocket endpoint allows getting updates via web sockets. Generally speaking, clients can subscribe by assigning a subscription id and will then receive updates on that subscription.\n\nIn this documentation, ⬆️ denotes messages from the client to the server, whereas messages from server to client are marked with ⬇️.\n\n## authentication\nWhen using cookies for authorization, the WebSocket connection is authenticated with the HTTP upgrade request.\n\nIf token headers are used, the *first* message from client to server must be:\n\n```\n⬆️ {\n    \"cmd\": \"authorize\",\n    \"idToken\": <string>\n}\n```\n\nIn all cases, clients must wait for the welcome message before sending other messages:\n\n\n```\n⬇️ { \"cmd\": \"authenticated\" }\n```\n\n## ping\nAfter 1 minute of inactivity of a client, the WebSocket connection will be considered stale and will automatically terminated. To prevent this, a ping message can be sent:\n\n```\n ⬆️ {\"cmd\": \"ping\"}\n```\n\nThe server also sends this message regularly. If no message has been received on a WebSocket connection for more than 1 minute, it should be terminated by the client.\n\n```\n ⬇️ {\"cmd\": \"ping\"}\n```\n\n## subscriptions\nSubscriptions can be used to get invalidate events or updates for selected resources. \n\n### invalidate subscriptions\nInvalidation events can be used for the frontend to know when reload requests via the HTTP endpoints are appropriate. Currently only invalidate events can be subscribed, the actual data must then be reloaded using the HTTP endpoints.\n\nTo set up a subscription for an invalidate event, use:\n\n```\n⬆️ {\n    \"cmd\": \"subscribe\",\n    \"type\": \"invalidate\",\n    \"subscriptionId\": 1,\n    \"entity: \"brokersessions\" /* \"positions\" | \"orders\" */,\n    \"portfolioId\": 42 /* required for \"positions\" or \"orders\" */\n}\n```\n\nIf the subscription failed to be set up on the server, an error will be sent for the subscription. This also automatically ends the subscription on the server side:\n\n```\n⬇️ {\n    \"subscriptionId\": 1,\n    \"error\": {\n        \"message\": \"Could not set up invalidation event due to...\"\n    }\n}\n```\n\nIf an invalid `subscriptionId` is provided (or the subscription id is already in use by the connection), an error like this will be sent:\n```\n⬇️ {\n    \"error\": {\n        \"message\": \"Could not add subscription due to invalid subscriptionId\"\n    }\n}\n```\n⚠️ *the connection will then be terminated immediately*.\n\nIf the subscription is sucessfuly set up, whenever an invalidation happens, the server will send a message like this:\n\n```\n⬇️ {\n    \"cmd\": \"invalidate\",\n    \"subscriptionId\": 1\n}\n```\n\nWhen that invalidation event is received, the client should reload the data using the corresponding endpoints.\n\nClients can end their subscription with the `unsubscribe` command:\n\n```\n⬆️ {\n    \"cmd\": \"unsubscribe\",\n    \"subscriptionId\": 1\n}\n```\n\n### subscribe to the state of a decoupled operation\nFor decoupled operations (e.g. authorizing a session TAN using a second factor device), the state of the operation can be subscribed:\n\n```\n⬆️ {\n    \"cmd\": \"subscribe\",\n    \"type\": \"decoupledOperationStatus\",\n    \"subscriptionId\": 1,\n    \"sessionId\": string,\n    \"decoupledOperationId\": string   \n}\n```\n\nError handling as well as unsubscribing works as described for invalidate subscriptions. Example message from the server for updating the state:\n\n```\n⬇️ {\n    \"cmd\": \"updateDecoupledOperationStatus\",\n    \"subscriptionId\": number,\n    \"state\": <DecoupledOperationStatus>\n}\n```\n","responses":{"101":{"description":"Upgrading to WebSocket"}}}}},"servers":[{"url":"https://api-preview.brokerize.com","description":"Preview environment"}],"tags":[{"name":"demobroker","description":"For every brokerize user, demo accounts at the demo broker can be created. Those accounts can be used to test client implementations for correct handling of the API, while *NOT* simulating real trading. In a demobroker portfolio, orders are always handled the way described below. This can be used to test applications both manually and automatically, because the behavior is reproducible (which is obviously not the case in a real trading account)."}]}